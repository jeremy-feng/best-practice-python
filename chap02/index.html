
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="http://www.jieyu.ai/chap02/">
      
      
        <link rel="prev" href="../chap01/">
      
      
        <link rel="next" href="../chap03/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.6">
    
    
      
        <title>第二章 Python的编程开发环境 - 解语科技</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-选择哪一种操作系统" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href=".." title="解语科技" class="md-header__button md-logo" aria-label="解语科技" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            解语科技
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第二章 Python的编程开发环境
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/zillionare/best-practice-python" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    best-practice-python
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link md-tabs__link--active">
        大型项目上，Python是个烂语言吗
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="解语科技" class="md-nav__button md-logo" aria-label="解语科技" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    解语科技
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zillionare/best-practice-python" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    best-practice-python
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="..">大型项目上，Python是个烂语言吗</a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="大型项目上，Python是个烂语言吗" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          大型项目上，Python是个烂语言吗
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chap01/" class="md-nav__link">
        第一章 为什么是Python
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          第二章 Python的编程开发环境
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        第二章 Python的编程开发环境
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-选择哪一种操作系统" class="md-nav__link">
    1. 选择哪一种操作系统？
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-windows下的虚拟linux环境" class="md-nav__link">
    2. Windows下的虚拟Linux环境
  </a>
  
    <nav class="md-nav" aria-label="2. Windows下的虚拟Linux环境">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-wsl方案" class="md-nav__link">
    2.1. WSL方案
  </a>
  
    <nav class="md-nav" aria-label="2.1. WSL方案">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211-安装wsl" class="md-nav__link">
    2.1.1. 安装WSL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#212-定制wsl" class="md-nav__link">
    2.1.2. 定制WSL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-docker方案" class="md-nav__link">
    2.2. Docker方案
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-虚拟机方案" class="md-nav__link">
    2.3. 虚拟机方案
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-小结" class="md-nav__link">
    2.4. 小结
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-集成开发环境ide" class="md-nav__link">
    3. 集成开发环境（IDE）
  </a>
  
    <nav class="md-nav" aria-label="3. 集成开发环境（IDE）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-vs-code-vs-pycharm使用哪一个ide" class="md-nav__link">
    3.1. VS Code vs Pycharm:使用哪一个IDE？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-vs-code及扩展" class="md-nav__link">
    3.2. VS Code及扩展
  </a>
  
    <nav class="md-nav" aria-label="3.2. VS Code及扩展">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-python扩展" class="md-nav__link">
    3.2.1. Python扩展
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322-remote---ssh" class="md-nav__link">
    3.2.2. Remote - SSH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323-版本管理相关扩展" class="md-nav__link">
    3.2.3. 版本管理相关扩展
  </a>
  
    <nav class="md-nav" aria-label="3.2.3. 版本管理相关扩展">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3231-gitlens" class="md-nav__link">
    3.2.3.1. GitLens
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3232-编辑提交信息的扩展" class="md-nav__link">
    3.2.3.2. 编辑提交信息的扩展
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3233-gitigore扩展" class="md-nav__link">
    3.2.3.3. gitigore扩展
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3234-本地文件历史" class="md-nav__link">
    3.2.3.4. 本地文件历史
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#324-代码辅助与自动完成" class="md-nav__link">
    3.2.4. 代码辅助与自动完成
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-其他开发环境" class="md-nav__link">
    4. 其他开发环境
  </a>
  
    <nav class="md-nav" aria-label="4. 其他开发环境">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-jupyter-notebook" class="md-nav__link">
    4.1. Jupyter Notebook
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-spyder" class="md-nav__link">
    4.2. Spyder
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chap03/" class="md-nav__link">
        第三章 构建Python虚拟环境
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chap04/" class="md-nav__link">
        第四章 项目布局和项目生成向导
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chap05/" class="md-nav__link">
        第五章 管理版本、依赖和构建 -- 基于Poetry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chap06/" class="md-nav__link">
        第六章 实现高效的Python编码
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chap07/" class="md-nav__link">
        第七章 代码单元测试
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chap08/" class="md-nav__link">
        第八章 代码版本管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chap09/" class="md-nav__link">
        第九章 持续集成
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chap10/" class="md-nav__link">
        第十章 撰写技术文档
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chap11/" class="md-nav__link">
        第十一章 发布应用
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



  <h1>第二章 Python的编程开发环境</h1>

<p>尽管条条道路通罗马，但毕竟有的路走得更平稳更快捷，更不要说有的人甚至就住在罗马。构建一个好用的开发环境，你的开发之路当然会走得更平稳快捷。因此，我们的旅程从这里开始。</p>
<p>本章首先介绍Python开发的操作系统环境，然后介绍几个最流行的集成IDE，并对他们的特点进行了比较，供读者选择。</p>
<h2 id="1-选择哪一种操作系统">1. 选择哪一种操作系统？<a class="headerlink" href="#1-选择哪一种操作系统" title="Permanent link">&para;</a></h2>
<p>看上去操作系统是一个与编程语言无关的话题，特别是象Python这样的开发语言，它编写的程序几乎可以运行在任何一种操作系统上。但是，仍然有一些微妙的差异我们需要考虑。首先，Python更适合于数据分析、人工智能和后台开发，而不是用于开发桌面和移动端应用。但无论是大数据分析和人工智能，还是后台开发，往往都部署在Linux服务器环境下。而且，这些应用所依赖的生态，也往往构建在Linux下（比如大数据平台和分布式计算平台）。一些重要的的程序库，尽管往往最终都会兼容多个操作系统，但由于操作系统之间的差异，它们在不同操作系统下的新版本发布计划往往是不一样的。一些开源的程序和类库往往会优先考虑Linux操作系统，它们在Linux上的测试似乎也更充分。</p>
<p>我们可以举出很多这样的例子，比如，量化交易是Python应用最广泛的领域之一。而pytalib则是其中常用的一个技术分析库。该库使用了一个c的模块，需要在安装时进行编译。在Windows下进行编译，需要下载和配置一系列的Visual C++的编译工具，有一定难度，特别是对Python程序员而言，很多概念都是Python程序员并不熟悉的。</p>
<p>不仅仅是Python程序库如此。我们可能需要依赖的各种服务也是如此。比如，尽管你可以在Windows机器上安装桌面版的Docker，然后运行一些容器，Windows下Docker对资源的利用远不如在Linux下来得充分 &ndash; 它们是在Docker服务启动时就从系统中划走的，无论当下是否有容器在运行，这此资源都无法被其它Windows程序使用。从根本上讲，这种差异是Windows不能提供容器级别的资源隔离造成的。</p>
<p>在本书的后面，我们将讲到CI/CD，这些都需要使用容器技术。那时，您将深切体会到使用Linux的种种方便。比如，我们将会使用Github Actions提供的容器来运行测试，但是，这些容器将不包括Windows。</p>
<p>基于上述原因，我们推荐使用Linux作为您的Python开发环境。本书中提到的工具和示例，如非特别提到，也都默认地使用Linux作为运行环境，并在Linux下测试通过。</p>
<p>但是，您很可能并不会喜欢这个建议，因为您的电脑很可能是MacOS或者Windows。</p>
<p>好消息是，MacOS和Linux都是所谓的&rdquo;类Unix&rdquo;操作系统，它们之间有极高的相似度。所以，如果您的电脑是MacOS操作系统，您大可不必安装另一个Linux。如果您的电脑是Windows操作系统，我们在下面也提供了三种方案，可以让您的机器也能运行一个虚拟的Linux操作系统用于开发。</p>
<h2 id="2-windows下的虚拟linux环境">2. Windows下的虚拟Linux环境<a class="headerlink" href="#2-windows下的虚拟linux环境" title="Permanent link">&para;</a></h2>
<p>在Windows下有三种构建Linux虚拟环境的方式。其中之一是Windows的原生方案，即使用Windows Subsystem for Linux(以下简称WSL)，其它两种方案则分别是Docker和虚拟机方案。</p>
<h3 id="21-wsl方案">2.1. WSL方案<a class="headerlink" href="#21-wsl方案" title="Permanent link">&para;</a></h3>
<p>WSL是Windows 10的一个新功能。通过WSL，在Windows之上，运行了一个GNU/Linux环境。在这个环境里，绝大多数Linux命令行工具和应用都可以运行，而不需要设置双系统，或者承担虚拟机带来的额外代价。</p>
<p>当前有两个版本可用，即v1和v2, 我个人更推荐使用v1。WSL v2的体验更象虚拟机，因此与windows集成性反而更差一些。</p>
<h4 id="211-安装wsl">2.1.1. 安装WSL<a class="headerlink" href="#211-安装wsl" title="Permanent link">&para;</a></h4>
<p>首先要启用“适用于Linux的Windows子系统”功能：</p>
<p><img alt="" src="http://images.jieyu.ai/images/2020-05/20200503185200[1].png" width="50%" /></p>
<p>设置后，需要重启一次电脑。接下来从Windows应用商店搜索安装一个Linux发行版，这里的示例中我们使用ubuntu:
<img alt="" src="http://images.jieyu.ai/images/2020-05/20200503191417[1].png" /></p>
<p>现在，在搜索栏输入ubuntu，就会打开ubuntu shell。由于是第一次运行，此时会提示我们输入用户名和口令。这样WSL就安装成功了。此后，也可以从搜索框输入<code>wsl</code>来启动这个系统。</p>
<h4 id="212-定制wsl">2.1.2. 定制WSL<a class="headerlink" href="#212-定制wsl" title="Permanent link">&para;</a></h4>
<p>使用WSL v1版本是一种特殊的体验。它既象一个虚拟机，但又缺乏部分功能，比如，它没有后台服务这个概念。我们可以在其中安装一些服务，比如redis或者数据库，但这些后台服务并不会随WSL一同启动。但是，我们可以通过一些定制，来使得WSL的使用体验更接近一台虚拟机。</p>
<p>我们的定制将实现两个功能，一是让WSL虚拟机随windows自动启动。二是当WSL启动后，它能自动运行一个ssh服务，这样我们就可以随时连接使用这台WSL虚拟机。学会这个定制之后，读者当然也可以让WSL启动之后，自动运行更多的后台服务。</p>
<p>我们需要写三个脚本，一个start.vbs，一个control.bat和一个commands.txt，并且增加一个开机自动执行的计划任务。当Windows开机后，这个计划任务自动执行，调用start.vbs来执行control.bat, 而control.bat则会启动WSL（及其依赖的Windows服务），并在WSL环境下执行定义在commands.txt中的那些命令&ndash;即要在WSL中运行的服务，比如ssh server。</p>
<p>// todo: 增加流程图</p>
<p>首先，我们在commands.txt文件定义要在WSL中运行的后台服务：
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>/etc/init.d/cron
/etc/init.d/ssh
</code></pre></div></td></tr></table></div>
然后，我们编写一个批处理脚本，用以启动WSL，并执行上述命令：
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">control.bat</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">REM 脚本来源于https://github.com/troytse/wsl-autostart/</span>
<span class="p">@</span><span class="k">echo</span> off
<span class="c1">REM Goto the detect section.</span>
<span class="k">goto</span> <span class="nl">lxssDetect</span>

<span class="p">:</span><span class="nl">lxssRestart</span>
    <span class="c1">REM ReStart the LxssManager service</span>
    net stop LxssManager

<span class="p">:</span><span class="nl">lxssStart</span>
    <span class="c1">REM Start the LxssManager service</span>
    net start LxssManager

<span class="p">:</span><span class="nl">lxssDetect</span>
    <span class="c1">REM Detect the LxssManager service status</span>
    <span class="k">for</span> <span class="k">/f</span> <span class="s2">&quot;skip=3 tokens=4&quot;</span> <span class="se">%%</span>i <span class="k">in</span> <span class="p">(</span><span class="s1">&#39;sc query LxssManager&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="k">set</span> <span class="s2">&quot;state=</span><span class="se">%%</span><span class="s2">i&quot;</span> <span class="p">&amp;</span><span class="k">goto</span> <span class="nl">lxssStatus</span>

<span class="p">:</span><span class="nl">lxssStatus</span>
    <span class="c1">REM If the LxssManager service is stopped, start it.</span>
    <span class="k">if</span> <span class="k">/i</span> <span class="s2">&quot;</span><span class="nv">%state%</span><span class="s2">&quot;</span><span class="o">==</span><span class="s2">&quot;STOPPED&quot;</span> <span class="p">(</span><span class="k">goto</span> <span class="nl">lxssStart</span><span class="p">)</span>
    <span class="c1">REM If the LxssManager service is starting, wait for it to finish start.</span>
    <span class="k">if</span> <span class="k">/i</span> <span class="s2">&quot;</span><span class="nv">%state%</span><span class="s2">&quot;</span><span class="o">==</span><span class="s2">&quot;STARTING&quot;</span> <span class="p">(</span><span class="k">goto</span> <span class="nl">lxssDetect</span><span class="p">)</span>
    <span class="c1">REM If the LxssManager service is running, start the linux service.</span>
    <span class="k">if</span> <span class="k">/i</span> <span class="s2">&quot;</span><span class="nv">%state%</span><span class="s2">&quot;</span><span class="o">==</span><span class="s2">&quot;RUNNING&quot;</span> <span class="p">(</span><span class="k">goto</span> <span class="nl">next</span><span class="p">)</span>
    <span class="c1">REM If the LxssManager service is stopping, nothing to do.</span>
    <span class="k">if</span> <span class="k">/i</span> <span class="s2">&quot;</span><span class="nv">%state%</span><span class="s2">&quot;</span><span class="o">==</span><span class="s2">&quot;STOPPING&quot;</span> <span class="p">(</span><span class="k">goto</span> <span class="nl">end</span><span class="p">)</span>

<span class="p">:</span><span class="nl">next</span>
    <span class="c1">REM Check the LxssManager service is started correctly.</span>
    wsl echo OK <span class="p">&gt;</span>nul <span class="mi">2</span><span class="p">&gt;</span>nul
    <span class="k">if</span> <span class="k">not</span> <span class="nv">%errorlevel%</span> <span class="o">==</span> 0 <span class="p">(</span><span class="k">goto</span> <span class="nl">lxssRestart</span><span class="p">)</span>

    <span class="c1">REM Start services in the WSL</span>
    <span class="c1">REM Define the service commands in commands.txt.</span>
    <span class="k">for</span> <span class="k">/f</span> <span class="se">%%</span>i <span class="k">in</span> <span class="p">(</span><span class="nv">%~dp0</span>commands.txt<span class="p">)</span> <span class="k">do</span> <span class="p">(</span>wsl sudo <span class="se">%%</span>i <span class="nv">%*</span><span class="p">)</span>

<span class="p">:</span><span class="nl">end</span>
</code></pre></div></td></tr></table></div>
然后我们编写一个start.vbs脚本，来执行control.bat：
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">start.vbs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">&#39; 脚本来源于 https://github.com/troytse/wsl-autostart/</span>
<span class="c1">&#39; Start services</span>
<span class="vg">Set</span><span class="w"> </span><span class="vg">UAC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">CreateObject</span><span class="p">(</span><span class="s2">&quot;Shell.Application&quot;</span><span class="p">)</span>
<span class="vg">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/c &quot;&quot;&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">CreateObject</span><span class="p">(</span><span class="s2">&quot;Scripting.FileSystemObject&quot;</span><span class="p">)</span><span class="o">.</span><span class="vg">GetParentFolderName</span><span class="p">(</span><span class="vg">WScript</span><span class="o">.</span><span class="vg">ScriptFullName</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;\control.bat&quot;&quot; start&quot;</span>
<span class="vg">UAC</span><span class="o">.</span><span class="vg">ShellExecute</span><span class="w"> </span><span class="s2">&quot;C:\Windows\System32\cmd.exe&quot;</span><span class="p">,</span><span class="w"> </span><span class="vg">command</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;runas&quot;</span><span class="p">,</span><span class="w"> </span><span class="il">0</span>
<span class="vg">Set</span><span class="w"> </span><span class="vg">UAC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">Nothing</span>
</code></pre></div></td></tr></table></div></p>
<p>最后，我们向计划任务程序中添加一个新的开机启动任务：</p>
<p><img alt="" src="http://images.jieyu.ai/images/202106/20210616215338.png" width="50%" /></p>
<p><img alt="" src="http://images.jieyu.ai/images/202106/20210616215237.png" width="50%" /></p>
<p>需要说明的是，通过Windows应用商店安装的ubuntu子系统，它应该已经安装好了ssh-server，我们上述操作中所做的事，只不过是让它随WSL一起启动而已。但是，如果您发现您的WSL中并没有安装ssh-server，您也可以自行安装。毕竟，这就是一台Linux服务器，您可以在上面安装几乎所有的可以运行在标准Linux上的任何软件。</p>
<p>通过应用上述方案，您就在Windows启动之后，在一台机器上拥有了同时运行的两个操作系统。特别值得一提的是，在您不使用WSL的时候，它只占用很少的CPU和内存资源（仅限WSL 1.0）。这是其它虚拟化方案所无法比拟的。</p>
<p>在本书写作时，WSL已经有了支持图形化界面的预览版，称之为<a href="https://github.com/microsoft/wslg">wslg</a>。未来这个版本将合并到WSL中，随Windows一起发行的正式版发行。下图是wslg图形化界面的一个效果图：</p>
<p><img alt="" src="http://images.jieyu.ai/images/202108WSLg_IntegratedDesktop.png" /></p>
<h3 id="22-docker方案">2.2. Docker方案<a class="headerlink" href="#22-docker方案" title="Permanent link">&para;</a></h3>
<p>WSL的出现要比Docker晚。因此，可能您的Windows不支持安装WSL，这种情况下，您可以尝试安装桌面版的Docker,然后通过Docker来运行一个Linux虚拟机。</p>
<p>安装Docker可以从其官方网站<sup id="fnref:docker"><a class="footnote-ref" href="#fn:docker">1</a></sup>下载，安装完成后，首次运行手动启动。可以从搜索框中搜索&rdquo;Docker&rdquo;，然后选择&rdquo;Docker Desktop&rdquo;来启动，见下图：</p>
<p><img alt="" src="http://images.jieyu.ai/images/202108docker-app-search.png" /></p>
<p>当Docker启动后，就会在系统托盘区显示一个通知图标：</p>
<p><img alt="" src="http://images.jieyu.ai/images/202108whale-icon-systray.png" /></p>
<p>上图中第三个，鲸鱼图标，即是Docker正在运行的标志。点击它可以进入管理界面。首次运行时需要做一些设置，可以参考官方文档。</p>
<p>在Windows上运行Docker，由于操作系统异构的原因，首先需要启用Hyper-V虚拟机，然后将Docker安装到这个虚拟机中。这就是为什么在Windows下安装运行Docker，无论当前是否有容器在运行，系统资源也被静态分配切割的原因。但是大概从2020年3月起，Docker开始支持运行基于WSL2的桌面版。基于WSL2的桌面版Docker，Docker后台服务启动更快，资源也仅在需要时才进行分配，因此在资源调度上更加灵活高效。</p>
<h3 id="23-虚拟机方案">2.3. 虚拟机方案<a class="headerlink" href="#23-虚拟机方案" title="Permanent link">&para;</a></h3>
<p>也有可能您的机器既不支持安装WSL，也不支持安装Docker。这种情况下，您可以通过安装VirtualBox<sup id="fnref:virtualbox"><a class="footnote-ref" href="#fn:virtualbox">2</a></sup>等虚拟机来运行Linux。这方面的技术大家应该很熟悉了，因此不再赘述。</p>
<h3 id="24-小结">2.4. 小结<a class="headerlink" href="#24-小结" title="Permanent link">&para;</a></h3>
<p>我们介绍了三种在Windows上构建Linux虚拟环境的方案。只要有可能，您首先应该安装的是WSL。WSL可以在运行在几乎所有的Windows发行版上，包括Win10 Home。</p>
<p>如果您的机器不支持安装WSL，也可以考虑安装Docker。即使您的机器支持WSL，出于练习CI/CD的考虑，也可以安装Docker，以便体验容器化构建和部署。当然，这需要您的机器有更强劲的CPU和内存。</p>
<p>对于较早的机型，无法升级到较新版本的Windows时，可以考虑使用虚拟机，比如免费版的VirtualBox。</p>
<h2 id="3-集成开发环境ide">3. 集成开发环境（IDE）<a class="headerlink" href="#3-集成开发环境ide" title="Permanent link">&para;</a></h2>
<p>作为一种脚本语言，Python可以无须编译即可运行，因此，几乎所有的文本编辑器都可以作为Python开发工具。然而，要进行真正严肃的开发，要在开发进度、开发质量之间取得最佳平衡，就需要一个更专业的工具。</p>
<p>集成开发环境（IDE）是一种提高开发效率的工具，它可以让开发者在编写代码时，得到各种代码提示，更早发现语法错误，还可以直接在编辑器中进行调试。</p>
<p>Pycharm和VS Code是进行Python应用程序开发的两个首选工具。对于从事数据分析和人工智能领域的开发者，还可以考虑Jupyter Notebook和Anaconda的Spyder。</p>
<h3 id="31-vs-code-vs-pycharm使用哪一个ide">3.1. VS Code vs Pycharm:使用哪一个IDE？<a class="headerlink" href="#31-vs-code-vs-pycharm使用哪一个ide" title="Permanent link">&para;</a></h3>
<p>Pycharm是老牌的Python开发IDE，Visual Studio Code（通常被引用为VS Code）则是近两年的后起之秀。VS Code完全免费，Pycharm则提供了社区版和专业版两个版本，专业版本功能更强大，但需要付费。下表简要说明了两个IDE的最重要的差异：</p>
<table>
<thead>
<tr>
<th>特性</th>
<th>Pycharm</th>
<th>VS Code</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>远程开发</td>
<td>仅专业版支持</td>
<td>支持</td>
<td>Pycharm文件编辑在本地，调试前将文件同步到远程机器上进行调试；VS Code通过文件共享协议，直接在远程机器上编辑和调试</td>
</tr>
<tr>
<td>代码冲突归并</td>
<td>支持三路归并</td>
<td>支持</td>
<td>VS Code从2022年7月起提供了三路归并编辑器</td>
</tr>
<tr>
<td>数据视图</td>
<td>支持</td>
<td>不支持</td>
<td>PyCharm中可以图形化界面查看数据库和来自DataFrame的数据；VS Code需要插件支持，但功能较弱。一般通过第三方数据库工具查行数据查看和管理</td>
</tr>
<tr>
<td>启动速度</td>
<td>慢</td>
<td>很快</td>
<td>VS Code启动速度十分优异，这也使得它除了用作开发外，还可以用作文档撰写、日记等需要快速打开的功能。</td>
</tr>
<tr>
<td>多开发语言支持</td>
<td>Python为主</td>
<td>支持多种开发语言</td>
<td>VS Code可以支持很多种语言的开发，因此特别适合专业开发者</td>
</tr>
</tbody>
</table>
<p>还有一些小的差异，比如VS Code很多功能是通过插件实现的，每个插件都有自己的日志输出窗口。在你使用VS Code时，当某个功能出错时，有可能只是某个插件的错误。这个错误可能只会静悄悄地在插件的日志窗口中输出，而不是输出在你熟悉的那些界面窗口中。这可能会让初学者感到困惑。而在Pycharm中，这些窗口、提示界面的安排似乎更符合我们的直觉。</p>
<p>总之，Pycharm是一个开箱即用的IDE，而VS Code安装之后，在正式开发之前，还得安装一系列插件，这可能要花费你一定的时间去比较、配置和学习。当然，如果你打算长期从事开发工作，那么在VS Code上投入一些时间则是值得的。VS Code是一个免费产品，它的许可证允许您使用VS Code来进行任何商业开发。因此，无论您是个人开发者，还是受雇于某个组织，您都可以使用它。</p>
<p>由于我们更倾向于使用VS Code，也由于Pycharm简单易上手，所以我们这里略过对Pycharm的使用说明，重点讲述如何配置VS Code开发环境。</p>
<h3 id="32-vs-code及扩展">3.2. VS Code及扩展<a class="headerlink" href="#32-vs-code及扩展" title="Permanent link">&para;</a></h3>
<p>VS Code是一个支持多语言编辑开发的平台，它本身只提供了编辑器、代码管理（Git）、扩展管理等基础功能。具体到某个语言的开发，则是通过加载该语言的扩展来完成的。因此，安装VS Code之后，往往还需要配置一系列的扩展。</p>
<p>安装好VS Code之后，在侧边栏上就会出现如下图所示工具栏：</p>
<p><img alt="" src="http://images.jieyu.ai/images/20210820210809145433.png" /></p>
<p>被圆形框框住的图标对应着扩展管理。上部的矩形框可以用来搜索某个扩展，找到对应的扩展并点击，就可以在右边的窗口中看到该扩展的详细信息，如下图所示：</p>
<p><img alt="" src="http://images.jieyu.ai/images/20210820210809145930.png" /></p>
<p>在这个详细信息页，提供了安装按钮。</p>
<p>VS Code扩展管理除了搜索之外，还提供了过滤、排序等功能，读者可以自行探索。如果读者要在多个开发环境下使用VS Code，可能希望这些扩展在不同的环境下都能使用，针对这个需求，VS Code还提供了扩展同步机制。在上图中，在扩展详情页的&rdquo;Uninstall&rdquo;按键右侧，有一个同步图标，点击后，VS Code会自动将该扩展同步到其他环境。</p>
<p>下面，我们将讨论一些最常用、最重要的VS Code扩展。在使用这些扩展武装VS Code之后，您的开发效率将大大提高。</p>
<h4 id="321-python扩展">3.2.1. Python扩展<a class="headerlink" href="#321-python扩展" title="Permanent link">&para;</a></h4>
<p>要在VS Code中开发Python应用程序，就需要安装Python扩展。该扩展如前图所示。</p>
<p>Python扩展由微软开发，目前有超过7500万次下载。它提供了IntelliSense、代码检查、调试、导航、格式化、重构和单元测试功能。此外，它还提供了Jupyter Notebook集成环境。</p>
<p>随Python扩展一起安装的，还有Pylance, Python Test Explorer for Visual Studio Code, Jupyter等扩展。</p>
<p>Pylance是微软基于自身收购的Pyright静态检查工具开发的具有IntelliSense的Languange Server。它提供语法高亮、代码自动完成、语法检查、参数建议等功能。</p>
<p>尽管Pylance提供了这些功能，但在使用中，我们更多地把Pylance看成是一个language server，上述功能中的语法检查、代码提示和自动完成等功能，还是应该通过更专业的专门扩展（或者第三方服务）来完成。在这里，Pylance可以作为这些功能的一个扩展平台。</p>
<p>Test Explorer的主要作用是发现和搜集项目中定义的单元测试用例，构建TestSuite，提供测试执行入口，并在测试完成之后，报告测试执行情况。</p>
<p>Jupyter是一个允许你在VS Code中阅读、开发notebook的扩展。与单独安装的Jupyter notebook相比，它能提供更强大的代码提示、变量查看和数据查看。此外，调试notebook一直是个比较麻烦的事。在VS Code中，你可以象调试Python代码一样，逐行运行和调试notebook。</p>
<p>在Python扩展安装完成之后，就可以进行Python开发了。在开发之前，需要为工程选择Python解释器。可以从命令面板中输入Python: Select Interpreter来完成，也可以点击状态栏中的选择图标，如下图所示：</p>
<p><img alt="" src="http://images.jieyu.ai/images/20210820210806163607.png" /></p>
<h4 id="322-remote---ssh">3.2.2. Remote - SSH<a class="headerlink" href="#322-remote---ssh" title="Permanent link">&para;</a></h4>
<p>这是一个非常有用的扩展，是微软官方开发的扩展之一。它可以让你在VS Code中直接打开远程机上的文件夹，编辑并调试运行。如果您使用过Pycharm等IDE，就会知道，尽管这些IDE也支持远程开发，但它们是在本地创建文件，调试运行前先要上传同步到远程机器上。频繁同步不仅降低了效率，而且也常常出现未能同步，导致行为与预期不一致，浪费时间查找问题的情况。这也是也是VS Code优于Pycharm的一个重要特性。</p>
<p><img alt="" src="http://images.jieyu.ai/images/20210820210809145039.png" /></p>
<p>安装好这个扩展之后，在侧边栏会出现一个远程连接图标。同时，如果当前已经连接到远程机器，则在状态栏最左侧，会出现该连接的概要信息。</p>
<h4 id="323-版本管理相关扩展">3.2.3. 版本管理相关扩展<a class="headerlink" href="#323-版本管理相关扩展" title="Permanent link">&para;</a></h4>
<p>VS Code只提供了简单的Git集成，在实际使用中，我们常常还需要更多的功能。这些功能包括：</p>
<ol>
<li>代码分支管理、提交历史查看</li>
<li>代码提交时，遵照指定的格式规范，以图形化的方式编辑commit message</li>
<li>gitignore文件的管理</li>
<li>local history的管理</li>
</ol>
<p>为实现上述功能，我们需要安装三个相关扩展。首先是GitLens。</p>
<h5 id="3231-gitlens">3.2.3.1. GitLens<a class="headerlink" href="#3231-gitlens" title="Permanent link">&para;</a></h5>
<p><img alt="" src="http://images.jieyu.ai/images/20210820210809155757.png" /></p>
<p>Gitlens的功能十分强大，是团队开发中常用的一个扩展。它的功能包括：</p>
<ol>
<li>在文件修改历史中快速导航</li>
<li>在代码行中提示blame信息，如下图所示：
<img alt="" src="http://images.jieyu.ai/images/202108hovers-current-line.png" /></li>
<li>
<p>gutter change，如下图所示：
<img alt="" src="http://images.jieyu.ai/images/20210820210809160826.png" /></p>
<p>gutter change是指如上图所示，在编辑区行号指示右侧，通过一个线条来指示当前区域存在变更，当你点击这个线条时，会弹出一个窗口，显示当前区域的变更历史，并且允许你回滚变更、或者提交变更。</p>
<p>如果你在编辑文件之前没有做好规划，引入了本应该隶属于多个提交的修改，gutter change是最好的补救方案。它允许你逐块、而不是按文件提交修改。因此，你可以将一个文件里的不同块分几次进行提交。</p>
</li>
<li>
<p>GitLens在侧边栏提供了丰富的工具条，如下图所示：</p>
</li>
</ol>
<p><img alt="" src="http://images.jieyu.ai/images/202108views-layout-gitlens.png" /></p>
<p>通过这些工具条，你不再需要记忆大量的git命令，并且这些命令的结果也以可视化的方式展示，更加高效。在这些工具栏里，提供了提交视图、仓库视图、分支视图、文件历史视图、标签视图等。</p>
<p>简单来说，GitLens将几乎所有的Git功能进行了图形化展示和重构，提供了一个丰富的操作界面，让你可以更加方便地操作Git和理解代码变更。</p>
<h5 id="3232-编辑提交信息的扩展">3.2.3.2. 编辑提交信息的扩展<a class="headerlink" href="#3232-编辑提交信息的扩展" title="Permanent link">&para;</a></h5>
<p>常用PyCharm的程序员不会不记得它的git commit对话框。遗憾的是，到目前为止，VS Code及其扩展都没能补充这一短板。不过，仍然有一些小众但好用的扩展，不仅可以帮助我们实现图形化界面下的commit消息编辑，还能帮助我们规范化地管理commit message。</p>
<p>这里我们推荐一个名为git-commit-plugin的扩展：</p>
<p><img alt="" src="https://images.jieyu.ai/images/202109/20210926101152.png" /></p>
<p>这个扩展会将commit message进行分类，并且给每个类别加上emoji图标，以便我们更快捷地识别烦别：
<img alt="" src="https://images.jieyu.ai/images/202109/20210926101451.png" /></p>
<p>给代码正确地分类是非常重要的一个任务。如果我们给每一次代码进行了正确地分类，那么在发行新的版本时，我们就可以根据这些历史提交信息，自动生成release notes。这样生成的release notes也许还需要稍微进行一些修改，但绝对可以避免遗漏重要的修改。</p>
<p>很显然，不是所有的提交信息都应该出现在release notes中，特别是象代码风格、文档修订、增加测试用例、以及构建相关的代码提交，往往都不是最终用户关心的，因此我们不应该在release notes中放入这些内容。由于我们对每一次代码提交都进行了正确的分类，所以，自动生成release notes的工具就可以按照我们指定的类别，只提取有效的信息到release notes中。</p>
<p>在后面，我们还会提及自动化地生成release notes的工具。我们通过工具来保证commit message的格式规范性，而release notes也是通过工具来提取和分析这些信息，整个软件开发流程就象流水线一样精确工作。</p>
<p>这正是本书的主旨所在：软件开发流程不应该是一些抽象的理念，而应该是通过一系列工具，得以强制执行的软件生产流水线。一旦流水线被调校好，生产出来的产品就能通过6 sigma的品质认证<sup id="fnref:6-sigma"><a class="footnote-ref" href="#fn:6-sigma">3</a></sup>。</p>
<p>// todo: 在持续集成中加入自动生成release notes的用法</p>
<h5 id="3233-gitigore扩展">3.2.3.3. gitigore扩展<a class="headerlink" href="#3233-gitigore扩展" title="Permanent link">&para;</a></h5>
<p>代码仓库只应该保留有用的文件。然而在开发过程中，工作区有时候不可避免地会产生一些临时文件、垃圾文件和不适合通过代码仓库保管的文件类型，比如调式时产生的日志，编译后产生的二进制文件等。为了避免这些文件被提交到代码仓库，我们可以在代码仓库中创建一个.gitignore文件，它包含了这些文件的相对路径或者匹配模板。如此一来，git在提交代码时，就会自动过滤掉这些文件。</p>
<p>.gitignore文件格式非常简单，每一行都是一个文件的相对路径。因此我们完全可以手动编辑这个文件。但是，有一些gitignore扩展能提供更多的功能：</p>
<ol>
<li>根据模板生成.gitignore文件。毕竟，一个.gitignore文件可能有几十行之多，其中有大量在不同项目之间通用的部分，这些都没有必要记忆。</li>
<li>方便您从工作区中选择文件并自动加入到.gitignore文件中。这样相对于手动编辑.gitignore文件，可以避免出现路径错误，也更加快捷。</li>
</ol>
<h5 id="3234-本地文件历史">3.2.3.4. 本地文件历史<a class="headerlink" href="#3234-本地文件历史" title="Permanent link">&para;</a></h5>
<p>尽管git提供了文件版本历史管理，但对未提交的修改，git是无法追踪的。但在代码提交之前，我们也可能对同一文件进行多次修改，并在某个时候，希望能查看和参考这些变动情况。这就需要有一个本地文件历史管理系统。
Pycharm提供了一个非常好用的本地文件历史的功能。在VS Code中，必须通过扩展来实现这一功能。</p>
<p>我们可以安装这个扩展：</p>
<p><img alt="" src="https://images.jieyu.ai/images/202109/Screen Shot 2021-09-26 at 11.38.58.png" /></p>
<p>需要注意的是，这个扩展会在工作区生成一个名为.history的文件夹，以存放本地文件历史。这个文件夹必须被加入到.gitignore文件中，否则，您很可能会把这个文件夹提交到代码仓库中。这可是一大堆垃圾文件！</p>
<p>下图展示了这个扩展对代码变动的跟踪情况：</p>
<p><img alt="" src="https://images.jieyu.ai/images/202109/20210926114236.png" /></p>
<h4 id="324-代码辅助与自动完成">3.2.4. 代码辅助与自动完成<a class="headerlink" href="#324-代码辅助与自动完成" title="Permanent link">&para;</a></h4>
<p>代码辅助与自动完成是我们使用IDE，而不是文本编辑器来编写代码的最重要原因。根据kite<sup id="fnref:kite"><a class="footnote-ref" href="#fn:kite">4</a></sup>的统计，使用kite来进行辅助编程，可以省去最多47%的代码键入，从而使得代码编写更加轻松和更为快速。</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>曾经有位同事在公司从事码农工作。她妆容精致，长长的指甲上镌刻着一些美丽的图案，流光溢彩，敲起键盘来，手指上的图案，就象蝴蝶一样翩翩起舞。我自己知道指甲刮蹭在键盘帽上的声音多让人难受，因此自己总是保持剪指甲，以保证键入时不受干扰。但工作一段时间后，我发现她的工作效率一点也不低 &ndash; 尽管在键入速度上，可能还是会受一些影响。</p>
</div>
<p>当然，您可能并不同意键入速度会左右编程效率这一观点，毕竟，在编程中，我们大量的时间都是在思考算法和功能如何实现、回忆某个库函数应该如何调用、以及我们自己定义的变量、常量名等。令人吃惊的是，随着人工智能能力的增强，现在相当部分的这类工作，都可以由代码辅助与自动完成工具来完成了。</p>
<p>就象我们可以把自动驾驶按自动化程度定义为5个级别一样，代码辅助也可以分为好多个级别。</p>
<p>最初级的级别，可能是普通文本编辑器所做到的那样，在单词级别上的提示。只要你曾经输入过一个单词或者一个句子，那么下次当你输入这个单词或者句子的前面部分，IDE就会自动提示这个单词或者句子。如果你常用Excel，你就很容易明白这是一种什么样的辅助。但这种提示远远不够精确，很多时候，它不能提供我们真正想要的输入。</p>
<p>对于程序开发来说，由于有程序语法规则可以借助，因此这种提示可以做得更精确一些。比如，你定义了一个类，那么下次如果你输入了一个类（或者类的一个实例变量）的名字，并且键入一个提示符（可能是&rdquo;.&rdquo;,或者&rdquo;-&gt;&rdquo;,依赖于程序语言），那么IDE就可以提示类的所有方法，或者属性，供我们选取。此外，如果导入了某个名字空间，IDE也可以基于同样的逻辑，来提示空间中的所有变量、函数、类等。这些都是严格依赖于语法的，所以，对静态语言，IDE的代码提示可以做得很棒。对于Python这样的动态语言，在没有使用类型标注时，要准确提示成员变量还是有一定困难的。</p>
<p>现在，有了人工智能的加持，代码辅助已进化到了令人惊叹的程度。实际上，这本书就是在Github Copilot<sup id="fnref:Github Copilot"><a class="footnote-ref" href="#fn:Github Copilot">5</a></sup>的帮助下完成的，我们可以看一下下面的例子：</p>
<p><img alt="" src="https://images.jieyu.ai/images/202109/20210926150605.png" /></p>
<p>Copilot根据前面的输入，自动生成了一个语法通顺的句子（这个句子在上图中显示为灰色），并且与上下文相当协调。这里我并不想使用它提示的用词（主要是担心读者并不愿意看一本机器写的书），但是，必须承认，除非是写诗，我们不必要象古人一样，吟安一个字，拈断数根须，文章并不是每一句都需要精雕细琢，有时候，完全可以使用copilot提示的字句来进行过渡。更多的时候，在写文章时，Copilot可以起到开拓思路的作用，这无疑是有重要作用的。</p>
<p>上面只是人工智能在普通文本辅助写作上的一例。当我们把领域限制在编程领域时，其结果就更加令人叹服。很多时候，只要你写下一行注释，Copilot就会能帮你完成代码，实现这行注释的功能。特别是当我们要实现的功能，已经在某个库函数中实现了，或者存在某个著名的算法时，你就会发现这个功能非常好用。</p>
<p>关于VS Code的扩展还很多。比如，我们的工程中可能使用了json, ymal等文件，或者使用了markdown/rst来编写文档。在编辑这些文件时，还有一些很好的工具来进行辅助和功能增强。比如Markdown对表格的支持比较差，手动编辑Markdown表格是比较繁琐的事，我们可以使用一些扩展，通过它们来编辑csv格式的表格内容，再转换成为Markdown表格。</p>
<p>限于篇幅，我们不可能一一介绍这些扩展。除了那些下载量极大的流行扩展，本章也介绍了一些比较小众的扩展。这些小众扩展在未来可能会消失（比如VS Code直接实现了其功能），或者被取代。重要的是，我们需要的是这些扩展实现的功能。介绍这些扩展，只是为了更好地帮助读者理解它们的功能。</p>
<h2 id="4-其他开发环境">4. 其他开发环境<a class="headerlink" href="#4-其他开发环境" title="Permanent link">&para;</a></h2>
<h3 id="41-jupyter-notebook">4.1. Jupyter Notebook<a class="headerlink" href="#41-jupyter-notebook" title="Permanent link">&para;</a></h3>
<p>Pycharm和VS Code都是大型开发工具，适合我们开发大型复杂应用程序。但在Python领域中，有一类问题更适合探索式编程，比如数据分析任务。我们拿到一些数据，通过统计方法查看它们的特性，进行一些可视化的分析。然后对数据进行一预处理，进而编写一些机器学习算法，如果结果不理想，则推倒重来，探索新的算法。</p>
<p>这种方法被称为探索式编程：探索式的工作重于遵循设计模式，代码中夹杂着大量的解释性文档和输出结果（包含图表和图像），它们都作为最终结果的一部分，而不是象传统的编程一样，代码、文档和输出结果是分离的。</p>
<p>Jupyter Notebook是探索式编程的利器。它提供了一个基于网页的编辑器和运行环境，用户输入被组织成一个个单元格，每个单元格可以是代码单元，也可以是文本单元；代码单元还允许有输出结果，输出结果可以是文本，也可以是图表或图像，如下图所示：</p>
<p><img alt="" src="https://images.jieyu.ai/images/202109/20210926164037.png" /></p>
<p>一个正在运行的notebook可以看成是一个进程，在此notebook中的代码单元格里定义的变量和函数都具有全局作用域，每个代码单元格都可以单独执行。这种模式有它极其方便的一面，你可以随时随地在notebook中运行代码，并且可以在不同的代码单元格中进行切换&ndash;无论是探索数据的特性，还是探索一个新的程序库的功能，都变得非常容易。</p>
<h3 id="42-spyder">4.2. Spyder<a class="headerlink" href="#42-spyder" title="Permanent link">&para;</a></h3>
<p>Spyder<sup id="fnref:spyder"><a class="footnote-ref" href="#fn:spyder">7</a></sup>是专门为科学家、数据分析师、工程师打造的一款开源的编程环境。它具有集成开发环境的高级编辑、分析、调试和profiling功能与科学库的数据探索、交互式执行、深度检查和精美可视化功能的独特组合。 我们很容易从它的界面上看出这一点：</p>
<p><img alt="" src="https://images.jieyu.ai/images/202109/20210927163158.png" /></p>
<p>Spyder包含在Anaconda发行版之内，所以一旦安装了Anaconda，就可以直接使用Spyder来编写Python代码。在它的官网上也提供了单独的安装包供下载。</p>
<p>我们主要介绍了三种类型的Python开发环境：适用于大型工程化开发的Pycharm/VS Code, 适用于探索式编程的Jupyter Notebook，还有融合了两者特点的Spyder。当然，在Pycharm/VS Code中，我们也一样可以打开和运行Jupyter Notebook，这项功能集成到这两种IDE中已经有一段时间了。</p>
<p>如果我们经常性的开发工作是构建高复用的组件库、或者复杂的应用程序，Pycharm/VS Code是绝对的不二之选。这两种工具都近乎完美地与负责测试、持续集成以及代码管理、文档构建的工具集成在一起。反之，如果你的工作更多的是探索性的，似乎只使用Jupyter Notebook就够了。而Spyder则为两方面需求都要兼顾的用户，提供了一种选择。</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:docker">
<p>docker的官方网站是：https://desktop.docker.com/&#160;<a class="footnote-backref" href="#fnref:docker" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:virtualbox">
<p>Virutalbox是目前最流行的桌面级虚拟机。它的使用完全免费。网站地址：https://www.virtualbox.org/&#160;<a class="footnote-backref" href="#fnref:virtualbox" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:6-sigma">
<p>在统计学中，6 sigma意味着置信度是99.99966%，在质量检验场景下，表明产品达到了很高的质量标准。从1970年代开始，摩托罗拉发现了提高质量与降低生产成本之间的正相关关系，于是发展出一整套改善工业流程、消除残疵的方法。1986年，摩托罗拉正式将其命名为6-sigma。它强调持续改进，稳定和预测性地提高流程结果；生产和商业流程可以透过测量、分析、提高和控制进行改善等等。随着摩托罗拉影响力的衰落，6-sigma的影响力也日渐式微，但它的核心观点和方法，比如持续改进等，仍然得到广泛认同和传播。&#160;<a class="footnote-backref" href="#fnref:6-sigma" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:kite">
<p>https://www.kite.com/&#160;<a class="footnote-backref" href="#fnref:kite" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:Github Copilot">
<p>https://www.copilot.ai/&#160;<a class="footnote-backref" href="#fnref:Github Copilot" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
<li id="fn:tabnine">
<p>https://www.tabnine.com/&#160;<a class="footnote-backref" href="#fnref:tabnine" title="Jump back to footnote 6 in the text">&#8617;</a></p>
</li>
<li id="fn:spyder">
<p>https://www.spyder-ide.org/&#160;<a class="footnote-backref" href="#fnref:spyder" title="Jump back to footnote 7 in the text">&#8617;</a></p>
</li>
</ol>
</div>




<h2 id="__comments">评论 </h2>

<script src="https://giscus.app/client.js"
        data-repo="zillionare/best-practice-python"
        data-repo-id="MDEwOlJlcG9zaXRvcnkzNjc4ODIzNDI="
        data-category="General"
        data-category-id="DIC_kwDOFe1wZs4CT7pV"
        data-mapping="title"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>
<script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate" ? "dark" : "light"
      giscus.setAttribute("data-theme", theme) 


    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate" ? "dark" : "light"

          /* Instruct Giscus to change theme */
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>
                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.indexes", "navigation.tabs", "navigation.instant", "navigation.tabs.sticky", "header.autohide", "navigation.top", "toc.follow", "toc.integrate", "content.code.copy", "content.code.annotate"], "search": "../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../assets/javascripts/bundle.51d95adb.min.js"></script>
      
    
  </body>
</html>